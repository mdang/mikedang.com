function load(url,callback){var script=document.createElement('script');script.type="text/javascript";if(script.readyState){script.onreadystatechange=function(){if(script.readyState=='loaded'||script.readyState=='complete'){script.onreadystatechange=null;callback()}}}else{script.onload=function(){callback()}}script.src=url;document.getElementsByTagName('head')[0].appendChild(script)}function fbs_click(){u=location.href;t=document.title;window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');return false}function set_page_title(page_title){document.title=page_title}function select_tab(tab){$('body').attr('id',tab)};function init_feature_cyle(){if($('#feature')){$('#feature').cycle({fx:'scrollUp',speed:700,timeout:10000,pause:1,next:'#feature-next',prev:'#feature-prev'})}};function init_tweet_control(){$('#twitter').hover(function(){$('#twitter-ctrl').fadeIn()},function(){$('#twitter-ctrl').fadeOut()})}function gridAnimationProjects(item){item.fadeIn("fast",function(){if(fitems.length>0){gridAnimationProjects(fitems.shift())}})}function gridAnimationSocial(item){item.fadeIn("fast",function(){if(gitems.length>0){gridAnimationSocial(gitems.shift())}})}function fade_in_projects(){var cCnt=5;var gH=$(".feature-item").height();var gM=15;var nH=60;fitems=new Array();$(".feature-item").each(function(){fitems.push($(this))});rCnt=Math.ceil((fitems.length)/cCnt);cH=((gH*rCnt)+(rCnt*gM))+nH;$('#dev-preview').css({'height':cH+'px'});gridAnimationProjects(fitems.shift())}function fade_in_social(){gitems=new Array();$(".soc-item").each(function(){gitems.push($(this))});gridAnimationSocial(gitems.shift())}function load_third_party_posts(third_party_id){show_loading_indicator();$.ajax({url:'/rpc/post_builder.php',type:'GET',data:'tpid='+third_party_id,dataType:'html',success:function(content){$('#soc-intro').html(content);var $container=$('#soc-intro');show_loading_indicator();$container.imagesLoaded(function(){$container.masonry({itemSelector:'.soc-item'});fade_in_social();setTimeout('hide_loading_indicator()',7000)})},error:function(XMLHttpRequest,textStatus,errorThrown){alert(textStatus)},complete:function(XMLHttpRequest,textStatus){}})}$(function(){setInterval('check_anchor()',300)});var current_anchor=null;var scrolling=true;show_loading_indicator=function(){$('#loader2').show()};hide_loading_indicator=function(){$('#loader2').hide()};check_anchor=function(){var hash=document.location.hash.substr(1);var is_ie_browser=is_ie();if(hash){if(hash.charAt(0)!='/'){return}if(current_anchor!=hash){current_anchor=hash;show_loading_indicator();if(!is_ie_browser){$('#content').fadeTo('fast',0.2)}$.ajax({url:'/rpc/content'+hash,type:'GET',data:'',cache:false,dataType:'html',success:function(content){$('#content').html(content);if(!is_ie_browser){$('#content').fadeTo('fast',1)}if(scrolling){$.scrollTo(0,{duration:1000})}else{enable_scrolling()}},error:function(XMLHttpRequest,textStatus,errorThrown){alert(textStatus)},complete:function(XMLHttpRequest,textStatus){hide_loading_indicator()}})}}};get_page=function(page_nm,tab,scrolling){if(tab){select_tab(tab)}if(scrolling==undefined){scrolling=true}if(scrolling==false){disable_scrolling()}page_nm=page_nm.replace(/http:\/\/www.mikedang.com/i,'');page_nm=page_nm.replace(/http:\/\/stg.mikedang.com/i,'');page_nm=page_nm.replace(/http:\/\/mikedang.com/i,'');window.location='#'+page_nm};disable_scrolling=function(){scrolling=false};enable_scrolling=function(){scrolling=true};is_ie=function(){return/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)};add_ajax_request_handlers=function(){$('.ajax').each(function(){$(this).click(function(){get_page($(this).attr('href'),$(this).attr('rel'));return false})})};$('#logo h1 a').click(function(){get_page($(this).attr('href'),'tab1',false);return false});$('.tab1 a').click(function(){get_page($(this).attr('href'),'tab1',false);return false});$('.tab2 a').click(function(){get_page($(this).attr('href'),'tab2',false);return false});$('.tab3 a').click(function(){get_page($(this).attr('href'),'tab3',false);return false});$('.tab4 a').click(function(){get_page($(this).attr('href'),'tab4',false);return false});add_ajax_request_handlers();